{
  "code": "import { Ground } from \"../scene/Ground\";\r\nimport { Ground1 } from \"../scene/Ground1\";\r\nimport { Ground2 } from \"../scene/Ground2\";\r\nimport { Ground3 } from \"../scene/Ground3\";\r\nexport class CollideGroup {\r\n}\r\nCollideGroup.GROUND = 1;\r\nCollideGroup.BUILDING = 2;\r\nCollideGroup.ADD_SPEED = 3;\r\nexport class MapManager {\r\n    constructor(scene) {\r\n        this._groundIndex = 0;\r\n        this._showGroundList = [];\r\n        this._scene = scene;\r\n    }\r\n    set setMainPlayer(player) {\r\n        this._player = player;\r\n    }\r\n    createGround(count = 1) {\r\n        for (let i = 0; i < count; i++) {\r\n            let def;\r\n            if (this._groundIndex <= 3) {\r\n                def = Ground;\r\n            }\r\n            else {\r\n                def = this.randomGround();\r\n            }\r\n            let ground = Laya.Pool.getItemByClass(def.poolName, def);\r\n            ground.init();\r\n            ground.setPos(0, 0, -this._groundIndex++ * 10);\r\n            this._scene.addChild(ground);\r\n            this._showGroundList.push(ground);\r\n        }\r\n    }\r\n    randomGround() {\r\n        let num = Math.random();\r\n        let def;\r\n        if (num <= 0.3) {\r\n            def = Ground;\r\n        }\r\n        else if (num > 0.3 && num <= 0.5) {\r\n            def = Ground1;\r\n        }\r\n        else if (num > 0.5 && num <= 0.8) {\r\n            def = Ground2;\r\n        }\r\n        else {\r\n            def = Ground3;\r\n        }\r\n        return def;\r\n    }\r\n    update(diff) {\r\n        if (!this._player || !this._player.parent)\r\n            return;\r\n        let len = this._showGroundList.length;\r\n        for (let i = 0; i < len; i++) {\r\n            let ground = this._showGroundList[i];\r\n            if (ground && ground.transform.position.z - this._player.transform.position.z > 10) {\r\n                ground.clear();\r\n                if (ground instanceof Ground1)\r\n                    Laya.Pool.recover(Ground1.poolName, ground);\r\n                else if (ground instanceof Ground2)\r\n                    Laya.Pool.recover(Ground2.poolName, ground);\r\n                else if (ground instanceof Ground)\r\n                    Laya.Pool.recover(Ground.poolName, ground);\r\n                this._showGroundList.splice(i--, 1);\r\n            }\r\n        }\r\n        let index = Math.floor(Math.abs(this._player.transform.position.z / 10));\r\n        if (index != this._index) {\r\n            this._index = index;\r\n            this.createGround();\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "D:/work/MyGame/BallGame/src/game/scene/Ground.ts",
    "D:/work/MyGame/BallGame/src/game/scene/Ball.ts",
    "D:/work/MyGame/BallGame/src/game/SceneRoot.ts",
    "D:/work/MyGame/BallGame/src/game/scene/Ground1.ts",
    "D:/work/MyGame/BallGame/src/game/scene/Ground2.ts",
    "D:/work/MyGame/BallGame/src/game/scene/Ground3.ts"
  ]
}
