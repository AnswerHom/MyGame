{
  "code": "import { Ground } from \"../scene/Ground\";\r\nexport class MapManager {\r\n    constructor(scene) {\r\n        this._groundIndex = 0;\r\n        this._showGroundList = [];\r\n        this._freeGroundList = [];\r\n        this._scene = scene;\r\n        this.createGround(3);\r\n    }\r\n    set setMainPlayer(player) {\r\n        this._player = player;\r\n    }\r\n    createGround(count = 1) {\r\n        for (let i = 0; i < count; i++) {\r\n            let ground = this._freeGroundList.shift();\r\n            if (!ground) {\r\n                ground = new Ground();\r\n            }\r\n            let pos = ground.transform.position;\r\n            pos.x = pos.y = 0;\r\n            pos.z = -this._groundIndex++ * 10;\r\n            ground.transform.position = pos;\r\n            this._showGroundList.push(ground);\r\n            this._scene.addChild(ground);\r\n        }\r\n    }\r\n    update(diff) {\r\n        if (!this._player)\r\n            return;\r\n        let len = this._showGroundList.length;\r\n        for (let i = 0; i < len; i++) {\r\n            let ground = this._showGroundList[i];\r\n            if (ground && ground.transform.position.z - this._player.transform.position.z > 10) {\r\n                ground.clear();\r\n                this._freeGroundList.push(ground);\r\n                this._showGroundList.splice(i--, 1);\r\n            }\r\n        }\r\n        let index = Math.floor(Math.abs(this._player.transform.position.z / 10));\r\n        if (index != this._index) {\r\n            this._index = index;\r\n            this.createGround();\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "D:/work/MyGame/BallGame/src/game/scene/Ground.ts",
    "D:/work/MyGame/BallGame/src/game/scene/Ball.ts"
  ]
}
