{
  "code": "import { ui } from \"./../ui/layaMaxUI\";\r\nimport { MapManager } from \"../game/manager/MapManager\";\r\nimport { Ball } from \"../game/scene/Ball\";\r\nexport default class GameUI extends ui.test.TestSceneUI {\r\n    constructor() {\r\n        super();\r\n        this._ballList = [];\r\n        this.newScene = Laya.stage.addChild(new Laya.Scene3D());\r\n        this._camera = this.newScene.addChild(new Laya.Camera(0, 0.1, 100));\r\n        this._camera.transform.rotate(new Laya.Vector3(-15, 0, 0), true, false);\r\n        var directionLight = new Laya.DirectionLight();\r\n        this.newScene.addChild(directionLight);\r\n        directionLight.color = new Laya.Vector3(0.6, 0.6, 0.6);\r\n        var mat = directionLight.transform.worldMatrix;\r\n        mat.setForward(new Laya.Vector3(-1.0, -1.0, -1.0));\r\n        directionLight.transform.worldMatrix = mat;\r\n        this._mapManager = new MapManager(this.newScene);\r\n        this, this.addMainPlayer();\r\n        Laya.timer.frameLoop(1, this, this.update);\r\n    }\r\n    addMainPlayer() {\r\n        this._mainPlayer = new Ball();\r\n        Laya.timer.once(100, this, this.onAddMainPlayer);\r\n    }\r\n    onAddMainPlayer() {\r\n        if (this._mapManager)\r\n            this._mapManager.setMainPlayer = this._mainPlayer;\r\n        this.newScene.addChild(this._mainPlayer);\r\n        let pos = this._mainPlayer.transform.position;\r\n        pos.y = 0.5;\r\n        this._mainPlayer.transform.position = pos;\r\n        this._ballList.push(this._mainPlayer);\r\n    }\r\n    update() {\r\n        let diff = Laya.timer.delta;\r\n        this._mapManager && this._mapManager.update(diff);\r\n        if (this._ballList) {\r\n            let len = this._ballList.length;\r\n            for (let i = 0; i < len; i++) {\r\n                let ball = this._ballList[i];\r\n                ball && ball.update(diff);\r\n            }\r\n        }\r\n        if (this._camera && this._mainPlayer) {\r\n            let pos = this._camera.transform.position;\r\n            let playerPos = this._mainPlayer.transform.position;\r\n            pos.setValue(playerPos.x, playerPos.y + 6, playerPos.z + 9.5);\r\n            this._camera.transform.position = pos;\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "F:/work/MyGame/BallGame/src/ui/layaMaxUI.ts",
    "F:/work/MyGame/BallGame/src/game/manager/MapManager.ts",
    "F:/work/MyGame/BallGame/src/game/scene/Ball.ts"
  ]
}
